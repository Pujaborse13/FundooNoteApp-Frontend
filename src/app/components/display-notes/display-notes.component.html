<div class="grid-container">
    
  <div class="note-tile" *ngFor="let note of allNotes" [ngStyle]="{ 'background-color': note.color || '#ffffff' }">
    <!-- <div class="note-tile" *ngFor="let note of notes" [ngStyle]="{ 'background-color': note.color || '#ffffff' }"> -->

      <div class="tile-header">
        <h3>{{ note.title }}</h3>
        <button mat-icon-button class="icon-button pin-button">
          <mat-icon fontSet="material-icons-outlined">push_pin</mat-icon>
        </button>
      </div>
  
      <div class="tile-body">
        <p>{{ note.description }}</p>
      </div>
  
      <div class="tile-footer">


         <!-- ONLY when note.isTrash is true -->
        <ng-container *ngIf="note.isTrash">
          <button mat-icon-button class="icon-button" (click)="OnDeleteNote(note)">
            <mat-icon fontSet="material-icons-outlined">delete</mat-icon>
          </button>
          <button mat-icon-button class="icon-button" (click)="OnRestore(note)">
            <mat-icon fontSet="material-icons-outlined">restore</mat-icon>
          </button>
        </ng-container>
        

         <!-- ONLY when note.isTrash is false -->
        <ng-container *ngIf="!note.isTrash">
        <button mat-icon-button class="icon-button" (click)="toggleColorPicker(note, $event)">
          <mat-icon fontSet="material-icons-outlined">palette</mat-icon>
        </button>
        <button mat-icon-button class="icon-button">
          <mat-icon fontSet="material-icons-outlined">notifications_none</mat-icon>
        </button>
        <button mat-icon-button class="icon-button">
          <mat-icon fontSet="material-icons-outlined">person_add</mat-icon>
        </button>
        <button mat-icon-button class="icon-button">
          <mat-icon fontSet="material-icons-outlined">image</mat-icon>
        </button>

        <button mat-icon-button class="icon-button" (click)="onArchiveNote(note)" >
          <mat-icon fontSet="material-icons-outlined" >
            {{ note.isArchive ? 'unarchive' : 'archive' }}</mat-icon>
        </button>
     </ng-container>


        <button mat-icon-button [matMenuTriggerFor]="menu" class="icon-button">
          <mat-icon fontSet="material-icons-outlined">more_vert</mat-icon>
        </button>
        
        <mat-menu #menu="matMenu" class="custom-menu">
          <div class="menu-content">
            
            <button mat-menu-item (click)="OnTrashNote(note)">
              <mat-icon fontSet="material-icons-outlined">delete</mat-icon>
              <span>Delete Note</span>
            </button>
        
            <button mat-menu-item>
              <mat-icon fontSet="material-icons-outlined">label</mat-icon><span>Add Label</span>
            </button>
        
            <button mat-menu-item>
              <mat-icon fontSet="material-icons-outlined">draw</mat-icon><span>Add Drawing</span>
            </button>
        
            <button mat-menu-item>
              <mat-icon fontSet="material-icons-outlined">content_copy</mat-icon><span>Make a Copy</span>
            </button>
        
            <button mat-menu-item>
              <mat-icon fontSet="material-icons-outlined">check_box</mat-icon><span>Show Checkboxes</span>
            </button>
        
            <button mat-menu-item>
              <mat-icon fontSet="material-icons-outlined">cloud_upload</mat-icon><span>Copy to Google Docs</span>
            </button>
        
            <button mat-menu-item>
              <mat-icon fontSet="material-icons-outlined">history</mat-icon><span>Version History</span>
            </button>
          </div>
        </mat-menu>
        
        
        <!-- Color picker -->
        <div *ngIf="note.showColorPicker" class="color-picker">
          <div
            class="color-circle"
            *ngFor="let color of colors"
            [ngStyle]="{ 'background-color': color }"
            (click)="selectColor(note, color)">
          </div>
        </div>
      </div>
  
    </div>
  </div>
  